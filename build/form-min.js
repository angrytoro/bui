define("bui/form",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=e("bui/common"),n=r.namespace("Form"),o=e("bui/form/tips");r.mix(n,{Tips:o,TipItem:o.Item,FieldContainer:e("bui/form/fieldcontainer"),Form:e("bui/form/form"),Row:e("bui/form/row"),Group:e("bui/form/fieldgroup"),HForm:e("bui/form/hform"),Rules:e("bui/form/rules"),Field:e("bui/form/field"),FieldGroup:e("bui/form/fieldgroup")}),i.exports=n}),define("bui/form/tips",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("jquery"),n=e("bui/common"),o=n.prefix,a=e("bui/overlay").Overlay,l="data-tip",u=o+"form-tip-container",s=a.extend({initializer:function(){var e=this,t=e.get("render");if(!t){var i=r(e.get("trigger")).parent();e.set("render",i)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,t=r(e.get("trigger"));t.val()?e.set("visible",!1):(e.set("align",{node:r(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,t=r(e.get("trigger"));e.get("el").on("click",function(){e.hide(),t.focus()}),t.on("click focus",function(){e.hide()}),t.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),c=function(e){return this.constructor!==c?new c(e):(c.superclass.constructor.call(this,e),void this._init())};c.ATTRS={form:{},items:{valueFn:function(){return[]}}},n.extend(c,n.Base),n.augment(c,{_init:function(){var e=this,t=r(e.get("form"));t.length&&(n.each(r.makeArray(t[0].elements),function(t){var i=r(t).attr(l);i&&e._initFormElement(t,r.parseJSON(i))}),t.addClass(u))},_initFormElement:function(e,t){t&&(t.trigger=e);var i=this,r=i.get("items"),n=new s(t);r.push(n)},getItem:function(e){var t=this,i=t.get("items"),o=null;return n.each(i,function(t){return r(t.get("trigger")).attr("name")===e?(o=t,!1):void 0}),o},resetVisible:function(){var e=this,t=e.get("items");n.each(t,function(e){e.resetVisible()})},render:function(){var e=this,t=e.get("items");n.each(t,function(e){e.render()})},destroy:function(){var e=this,t=e.get(t);n.each(t,function(e){e.destroy()})}}),c.Item=s,i.exports=c}),define("bui/form/fieldcontainer",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,i){function r(e){return e.is(v)}function n(e,t){if(e!=t){if(r(e))return[e];var i=e.attr("class");if(i&&(-1!==i.indexOf(f)||-1!==i.indexOf(d)))return[e]}var l=[],u=e.children();return a.each(u,function(e){l=l.concat(n(o(e),t))}),l}var o=e("jquery"),a=e("bui/common"),l=e("bui/form/field"),u=e("bui/form/groupvalid"),s=a.prefix,c="form-field",d=s+c,f=s+"form-group",v="input,select,textarea",g=a.Component.View.extend([u.View]),m=a.Component.Controller.extend([u],{syncUI:function(){var e=this,t=e.getFields(),i=e.get("validators");a.each(t,function(e){var t=e.get("name");i[t]&&e.set("validator",i[t])}),a.each(i,function(t,i){if(0==i.indexOf("#")){var r=i.replace("#",""),n=e.getChild(r,!0);n&&n.set("validator",t)}})},getDecorateElments:function(){var e=this,t=e.get("el"),i=n(t,t);return i},findXClassByNode:function(e,t){return"checkbox"===e.attr("type")?c+"-checkbox":"radio"===e.attr("type")?c+"-radio":"number"===e.attr("type")?c+"-number":e.hasClass("calendar")?c+"-date":"SELECT"==e[0].tagName?c+"-select":r(e)?c:a.Component.Controller.prototype.findXClassByNode.call(this,e,t)},getRecord:function(){var e=this,t={},i=e.getFields();return a.each(i,function(i){var r=i.get("name"),n=e._getFieldValue(i);if(t[r]){if(a.isArray(t[r])&&null!=n)t[r].push(n);else if(null!=n){var o=[t[r]];o.push(n),t[r]=o}}else t[r]=n}),t},getFields:function(e){var t=this,i=[],r=t.get("children");return a.each(r,function(t){t instanceof l?e&&t.get("name")!=e||i.push(t):t.getFields&&(i=i.concat(t.getFields(e)))}),i},getField:function(e){var t=this,i=t.getFields(),r=null;return a.each(i,function(t){return t.get("name")===e?(r=t,!1):void 0}),r},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,t){var i=this,r=i.getFields(e);a.each(r,function(e){i._setFieldValue(e,t)})},_setFieldValue:function(e,t){if(!e.get("disabled"))if(e instanceof l.Check){var i=e.get("value");t&&(i===t||a.isArray(t)&&a.Array.contains(i,t))?e.set("checked",!0):e.set("checked",!1)}else null==t&&(t=""),e.clearErrors(!0),e.set("value",t)},getFieldValue:function(e){var t=this,i=t.getFields(e),r=[];return a.each(i,function(e){var i=t._getFieldValue(e);i&&r.push(i)}),0===r.length?null:1===r.length?r[0]:r},_getFieldValue:function(e){return e instanceof l.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var t=this,i=t.getFields();a.each(i,function(i){var r=i.get("name");t._setFieldValue(i,e[r])})},updateRecord:function(e){var t=this,i=t.getFields();a.each(i,function(i){var r=i.get("name");e.hasOwnProperty(r)&&t._setFieldValue(i,e[r])})},focus:function(){var e=this,t=e.getFields(),i=t[0];i&&i.focus()},_uiSetDisabled:function(e){var t=this,i=t.get("children");a.each(i,function(t){t.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:g}}},{xclass:"form-field-container"});m.View=g,i.exports=m}),define("bui/form/field",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=e("bui/common"),n=e("bui/form/fields/base");r.mix(n,{Text:e("bui/form/fields/text"),Date:e("bui/form/fields/date"),Select:e("bui/form/fields/select"),Hidden:e("bui/form/fields/hidden"),Number:e("bui/form/fields/number"),Check:e("bui/form/fields/check"),Radio:e("bui/form/fields/radio"),Checkbox:e("bui/form/fields/checkbox"),Plain:e("bui/form/fields/plain"),List:e("bui/form/fields/list"),TextArea:e("bui/form/fields/textarea"),Uploader:e("bui/form/fields/uploader"),CheckList:e("bui/form/fields/checklist"),RadioList:e("bui/form/fields/radiolist")}),i.exports=n}),define("bui/form/fields/base",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("jquery"),n=e("bui/common"),o=n.Component,a=e("bui/form/tips").Item,l=e("bui/form/valid"),u=e("bui/form/remote"),s=n.prefix+"form-field-error",c="bui-form-tip-container",d=o.View.extend([u.View,l.View],{renderUI:function(){var e=this,t=e.get("control");if(t)e.set("controlContainer",t.parent());else{var i=e.get("controlTpl"),n=e.getControlContainer();if(i){var t=r(i).appendTo(n);e.set("control",t)}}},clearErrors:function(){var e=this,t=e.get("msgEl");t&&(t.remove(),e.set("msgEl",null)),e.get("el").removeClass(s)},showError:function(e,t){var i=this,o=i.get("control"),a=n.substitute(t,{error:e}),l=r(a);l.appendTo(o.parent()),i.set("msgEl",l),i.get("el").addClass(s)},getControlContainer:function(){var e=this,t=e.get("el"),i=e.get("controlContainer");return i&&n.isString(i)&&(i=t.find(i)),i&&i.length?i:t},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var t=this;t.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),f=o.Controller.extend([u,l],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var t=e.get("tip");if(t){var i=e.getTipTigger();i&&i.parent().addClass(c),t.trigger=i,t.autoRender=!0,t=new a(t),e.set("tip",t)}})},bindUI:function(){var e=this,t=e.get("validEvent"),i=e.get("changeEvent"),r=e.get("firstValidEvent"),n=e.getInnerControl();n.is("select")&&(t="change"),n.on(t,function(){var t=e.getControlValue(n);e.validControl(t)}),r&&n.on(r,function(){if(!e.get("hasValid")){var t=e.getControlValue(n);e.validControl(t)}}),e.on(i,function(){e.onValid()}),e.on("remotecomplete",function(t){e._setError(t.error)})},onValid:function(){var e=this,t=e.getControlValue();t=e.parseValue(t),e.isCurrentValue(t)||(e.setInternal("value",t),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var t=this;return e=e||t.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,t={};return t[e.get("name")]=e.getControlValue(),t},setControlValue:function(e){var t=this,i=t.getInnerControl();i.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var t,i=this;return e=e||i.getControlValue(),preError=i.get("error"),t=i.getValidError(e),i.setInternal("hasValid",!0),t?(i._setError(t),i.fire("error",{msg:t,value:e}),preError!==t&&i.fire("validchange",{valid:!1})):(i._clearError(),i.fire("valid"),preError&&i.fire("validchange",{valid:!0})),!t},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var t=this;t._clearError(),e&&t.getControlValue()!=t.get("value")&&t.setControlValue(t.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,t=e.get("tip");t&&t.destroy&&t.destroy()},setInnerWidth:function(e){var t=this,i=t.getInnerControl(),o=i.siblings(),a=i.outerWidth()-i.width();n.each(o,function(e){a+=r(e).outerWidth()}),i.width(e-a)},_resetTip:function(){var e=this,t=e.get("tip");t&&t.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var t=this;t.setControlValue(e),t.get("rendered")&&(t.validControl(),t.onChange()),t._resetTip()},_uiSetDisabled:function(e){var t=this,i=t.getInnerControl(),r=t.get("children");i.attr("disabled",e),t.get("rendered")&&(e&&t.clearErrors(),e||t.valid()),n.each(r,function(t){t.set("disabled",e)})},_uiSetWidth:function(e){var t=this;null!=e&&t.get("forceFit")&&t.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:d}},PARSER:{control:function(e){var t=e.find("input,select,textarea");return t.length?t:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var t=this,i="select,input,textarea",r=t.get("value");return r||(e.is(i)?(r=e.val(),!r&&e.is("select")&&(r=e.attr("value"))):r=e.find(i).val()),r},name:function(e){var t=this,i="select,input,textarea",r=t.get("name");return r||(r=e.is(i)?e.attr("name"):e.find(i).attr("name")),r}}},{xclass:"form-field"});f.View=d,i.exports=f}),define("bui/form/valid",["bui/common","jquery"],function(e,t,i){var r=e("bui/common"),n=e("bui/form/rules"),o=function(){};o.prototype={getErrorsContainer:function(){var e=this,t=e.get("errorContainer");return t?r.isString(t)?e.get("el").find(t):t:e.getContentElement()},showErrors:function(e){var t=this,i=t.getErrorsContainer(),n=t.get("errorTpl");return t.clearErrors(),t.get("showError")?t.get("showOneError")?void(e&&e.length&&t.showError(e[0],n,i)):void r.each(e,function(e){e&&t.showError(e,n,i)}):void 0},showError:function(e,t,i){},clearErrors:function(){}};var a=function(){};a.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},a.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(t){var i=t.newVal;i?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,t){if(!e)return null;if(this.get("pauseValid"))return null;var i=this,r=i._getValidMessages(),o=null;for(var a in e)if(e.hasOwnProperty(a)){var l=e[a];if(o=n.valid(a,t,l,r[a],i))break}return o},_getValidMessages:function(){var e=this,t=e.get("defaultMessages"),i=e.get("messages");return r.merge(t,i)},getValidError:function(e){var t=this,i=t.get("validator"),r=null;return r=t.validRules(t.get("defaultRules"),e)||t.validRules(t.get("rules"),e),r||this.get("pauseValid")||(t.parseValue&&(e=t.parseValue(e)),r=i?i.call(this,e):""),r},getErrors:function(){},showErrors:function(e){var t=this,e=e||t.getErrors();t.get("view").showErrors(e)},clearErrors:function(e,t){t=null==t?!0:t;var i=this,n=i.get("children");t&&r.each(n,function(i){i.clearErrors&&(i.field?i.clearErrors(e):i.clearErrors(e,t))}),i.set("error",null),i.get("view").clearErrors()},addRule:function(e,t,i){var r=this,n=r.get("rules"),o=r.get("messages");n[e]=t,i&&(o[e]=i)},addRules:function(e,t){var i=this;r.each(e,function(e,r){var n=t?t[r]:null;i.addRule(r,e,n)})},removeRule:function(e){var t=this,i=t.get("rules");delete i[e]},clearRules:function(){var e=this;e.set("rules",{})}},a.View=o,i.exports=a}),define("bui/form/rules",["jquery","bui/common"],function(e,t,i){function r(e){return parseFloat(e)}function n(e){return BUI.Date.parse(e)}function o(e,t,i){var r=e&&e.equals!==!1;return r?t>=i:t>i}function a(e){return""==e||null==e}function l(e,t,i,r){for(var n=r.getFields(),l=!0,u=1;u<n.length;u++){var s,c,d=n[u],f=n[u-1];if(d&&f&&(s=d.get("value"),c=f.get("value"),!a(s)&&!a(c)&&!o(t,s,c))){l=!1;break}}return l?null:i}function u(e){var t=e.getFieldAt(0);return t?t.get("name"):""}function s(e,t){if(BUI.isArray(t)||(t=[t]),!e||!t.length)return!1;var i=e?BUI.isArray(e)?e.length:1:0;if(1==t.length){var r=t[0];if(!r)return!0;if(r>i)return!1}else{var n=t[0],o=t[1];if(n>i||i>o)return!1}return!0}var c=e("jquery"),d=e("bui/form/rule"),f={},v={add:function(e){var t;return c.isPlainObject(e)?(t=e.name,f[t]=new d(e)):e.get&&(t=e.get("name"),f[t]=e),f[t]},remove:function(e){delete f[e]},get:function(e){return f[e]},valid:function(e,t,i,r,n){var o=v.get(e);return o?o.valid(t,i,r,n):null},isValid:function(e,t,i,r){return null==v.valid(e,t,i,r)}};v.add({name:"required",msg:BUI.i18n("notNull"),validator:function(e,t,i){return t!==!1&&/^\s*$/.test(e)?i:void 0}}),v.add({name:"equalTo",msg:BUI.i18n("inputDifferent"),validator:function(e,t,i){var r=c(t);return r.length&&(t=r.val()),e===t?void 0:i}}),v.add({name:"min",msg:BUI.i18n("inputNotLess"),validator:function(e,t,i){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&r(e)<r(t)?i:void 0}}),v.add({name:"max",msg:BUI.i18n("inputNotMore"),validator:function(e,t,i){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&r(e)>r(t)?i:void 0}}),v.add({name:"length",msg:BUI.i18n("inputLenght"),validator:function(e,t,i){return null!=e&&(e=c.trim(e.toString()),t!=e.length)?i:void 0}}),v.add({name:"minlength",msg:BUI.i18n("inputLenNotLess"),validator:function(e,t,i){if(null!=e){e=c.trim(e.toString());var r=e.length;if(t>r)return i}}}),v.add({name:"maxlength",msg:BUI.i18n("inputLenNotMore"),validator:function(e,t,i){if(e){e=c.trim(e.toString());var r=e.length;if(r>t)return i}}}),v.add({name:"regexp",msg:BUI.i18n("inputIllegal"),validator:function(e,t,i){return t?t.test(e)?void 0:i:void 0}}),v.add({name:"email",msg:BUI.i18n("mailIllegal"),validator:function(e,t,i){return e=c.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:i:void 0}}),v.add({name:"date",msg:BUI.i18n("dateIllegal"),validator:function(e,t,i){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=c.trim(e),e?BUI.Date.isDateString(e)?void 0:i:void 0)}}),v.add({name:"minDate",msg:BUI.i18n("dateNotLess"),validator:function(e,t,i){if(e){var r=n(e);if(r&&r<n(t))return i}}}),v.add({name:"maxDate",msg:BUI.i18n("dateNotMore"),validator:function(e,t,i){if(e){var r=n(e);if(r&&r>n(t))return i}}}),v.add({name:"mobile",msg:BUI.i18n("phoneIllegal"),validator:function(e,t,i){return e=c.trim(e),e?/^\d{11}$/.test(e)?void 0:i:void 0}}),v.add({name:"number",msg:BUI.i18n("numberIllegal"),validator:function(e,t,i){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?i:void 0)}}),v.add({name:"dateRange",msg:BUI.i18n("dateInputError"),validator:l}),v.add({name:"numberRange",msg:BUI.i18n("numberInputError"),validator:l}),v.add({name:"checkRange",msg:BUI.i18n("mustSelectOption"),validator:function(e,t,i,r){var n,o=u(r),a=t;return o&&a&&(n=e[o],!s(n,a))?i:null}});i.exports=v}),define("bui/form/rule",["jquery","bui/common"],function(e,t,i){function r(e,t,i,r,n){l.isArray(i)&&l.isString(i[1])&&(i[1]&&(r=i[1]),i=i[0]);var a=e,u=a.get("validator"),s=o(e,i,r);return t=null==t?"":t,u.call(a,t,i,s,n)}function n(e){if(null==e)return{};if(a.isPlainObject(e))return e;var t=e,i={};if(l.isArray(e)){for(var r=0;r<t.length;r++)i[r]=t[r];return i}return{0:e}}function o(e,t,i){var r=n(t);return i=i||e.get("msg"),l.substitute(i,r)}var a=e("jquery"),l=e("bui/common"),u=function(e){u.superclass.constructor.call(this,e)};l.extend(u,l.Base),u.ATTRS={name:{},msg:{},validator:{value:function(e,t,i,r){}}},l.augment(u,{valid:function(e,t,i,n){var o=this;return r(o,e,t,i,n)}}),i.exports=u}),define("bui/form/remote",["jquery","bui/common"],function(e,t,i){var r=e("jquery"),n=e("bui/common"),o=function(){};o.ATTRS={isLoading:{},loadingEl:{}},o.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,t=e.get("loadingEl"),i=e.get("loadingTpl");i&&!t&&(t=r(i).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",t))},_clearLoading:function(){var e=this,t=e.get("loadingEl");t&&(t.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var t=this;e?t._setLoading():t._clearLoading()}};var a=function(){};a.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(e){return n.isString(e)&&(e={url:e}),e}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},a.prototype={__bindUI:function(){var e=this;e.on("valid",function(t){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var i=e.getControlValue(),r=e.getRemoteParams();e._startRemote(r,i)}}),e.on("error",function(t){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,t){function i(){r._remoteValid(e,n,t),r.set("isLoading",!0)}var r=this,n=r.get("remoteHandler"),o=r.get("cacheMap"),a=r.get("remoteDaly");return n&&r._cancelRemote(n),null!=o[t]?void r._validResult(r._getCallback(),o[t]):(n=setTimeout(i,a),void r.setInternal("remoteHandler",n))},_validResult:function(e,t){var i=this,r=e(t);i.onRemoteComplete(r,t)},onRemoteComplete:function(e,t,i){var r=this;i==r.get("remoteHandler")&&(r.fire("remotecomplete",{error:e,data:t}),r.set("isLoading",!1),r.setInternal("remoteHandler",null))},_getOptions:function(e){var t=this,i=t.get("remote"),r=t.get("defaultRemote"),o=n.merge(r,i,{data:e});return o},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,t,i){var n=this,o=n.get("cacheMap"),a=n._getOptions(e);a.success=function(e){var r=a.callback,l=r(e);o[i]=e,n.onRemoteComplete(l,e,t)},a.error=function(e,i,r){n.onRemoteComplete(r,null,t)},n.fire("remotestart",{data:e}),r.ajax(a)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var t=this;e=e||t.get("remoteHandler"),e&&(clearTimeout(e),t.setInternal("remoteHandler",null)),t.set("isLoading",!1)}},a.View=o,i.exports=a}),define("bui/form/fields/text",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("bui/form/fields/base"),n=r.extend({},{xclass:"form-field-text"});i.exports=n}),define("bui/form/fields/date",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("jquery"),n=e("bui/common"),o=e("bui/form/fields/base"),a=n.Date,l=o.extend({renderUI:function(){var e=this,t=e.get("datePicker");r.isPlainObject(t)&&e.initDatePicker(t),(t.get&&t.get("showTime")||t.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(t){var i=this;e.async("bui/calendar",function(e){t.trigger=i.getInnerControl(),t.autoRender=!0,t=new e.DatePicker(t),i.set("datePicker",t),i.set("isCreatePicker",!0),i.get("children").push(t)})},setControlValue:function(e){var t=this,i=t.getInnerControl();n.isDate(e)&&(e=a.format(e,t._getFormatMask())),i.val(e)},_getFormatMask:function(){var e=this,t=e.get("datePicker");return t.showTime||t.get&&t.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(e){return n.isNumber(e)?new Date(e):a.parse(e)},isCurrentValue:function(e){return a.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var t=this,i=t.get("datePicker");i&&(i.set?i.set("maxDate",e):i.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var t=this,i=t.get("datePicker");i&&(i.set?i.set("minDate",e):i.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(e){return n.isNumber(e)?new Date(e):e}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(e){var t=this,i=t.get("datePicker")||{};return e.hasClass("calendar-time")&&n.mix(i,{showTime:!0}),i}}},{xclass:"form-field-date"});i.exports=l}),define("bui/form/fields/select",["jquery","bui/common","bui/overlay"],function(e,t,i){function r(e,t,i){e.children().remove();var r=i.get("emptyText");r&&i.get("showBlank")&&n("",r,e),a.each(t,function(t){n(t.value,t.text,e)})}function n(e,t,i){var r=new Option(t,e),n=i[0].options;n[n.length]=r}var o=e("jquery"),a=e("bui/common"),l=e("bui/form/fields/base"),u=l.extend({renderUI:function(){var e=this,t=e.getInnerControl(),i=e.get("select");e.get("srcNode")&&t.is("select")||o.isPlainObject(i)&&e._initSelect(i)},_initSelect:function(t){var i=this;i.get("items");e.async("bui/select",function(e){t.render=i.getControlContainer(),t.valueField=i.getInnerControl(),t.autoRender=!0,t=new e.Select(t),i.set("select",t),i.set("isCreate",!0),i.get("children").push(t),t.on("change",function(e){var r=t.getSelectedValue();i.set("value",r)})})},setItems:function(e){var t=this,i=t.get("select");if(o.isPlainObject(e)){var n=[];a.each(e,function(e,t){n.push({value:t,text:e})}),e=n}var l=t.getInnerControl();l.is("select")&&(r(l,e,t),t.setControlValue(t.get("value")),t.getControlValue()||t.setInternal("value","")),i&&(i.set?i.set("items",e):i.items=e)},setControlValue:function(e){var t=this,i=t.get("select"),r=t.getInnerControl();r.val(e),i&&i.set&&i.getSelectedValue()!==e&&i.setSelectedValue(e)},getSelectedText:function(){var e=this,t=e.get("select"),i=e.getInnerControl();if(i.is("select")){var r=i[0],n=r.options[r.selectedIndex];return n?n.text:""}return t.getSelectedText()},getTipTigger:function(){var e=this,t=e.get("select");return t&&t.rendered?t.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var t=this,i=t.getInnerControl(),r=t.get("select"),n=i.outerWidth()-i.width();i.width(e-n),r&&r.set&&r.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:a.i18n("pleaseSelect")},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var t=e.find("option"),i=this.get("emptyText");return t.length&&(i=o(t[0]).text()),i}}},{xclass:"form-field-select"});i.exports=u}),define("bui/form/fields/hidden",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("bui/form/fields/base"),n=r.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});i.exports=n}),define("bui/form/fields/number",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("bui/form/fields/base"),n=r.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var t=this,i=t.get("allowDecimals");return e=e.replace(/\,/g,""),i?parseFloat(parseFloat(e).toFixed(t.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});i.exports=n}),define("bui/form/fields/check",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=(e("jquery"),e("bui/form/fields/base")),n=r.extend({onValid:function(){var e=this,t=e._getControlChecked();e.setInternal("checked",t),e.fire("change"),t?e.fire("checked"):e.fire("unchecked")},_setControlChecked:function(e){var t=this,i=t.getInnerControl();i.attr("checked",!!e)},_getControlChecked:function(){var e=this,t=e.getInnerControl();return!!t.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(e){},_uiSetChecked:function(e){var t=this;t._setControlChecked(e),t.get("rendered")&&t.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")}}},{xclass:"form-check-field"});i.exports=n}),define("bui/form/fields/radio",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("bui/form/fields/check"),n=r.extend({bindUI:function(){var e=this,t=e.get("parent"),i=e.get("name");t&&e.getInnerControl().on("click",function(r){var n=t.getFields(i);BUI.each(n,function(t){t!=e&&t.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});i.exports=n}),define("bui/form/fields/checkbox",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("bui/form/fields/check"),n=r.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});i.exports=n}),define("bui/form/fields/plain",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("jquery"),n=e("bui/form/fields/base"),o=n.View.extend({_uiSetValue:function(e){var t,i=this,n=i.get("textEl"),o=i.getControlContainer(),a=i.get("renderer"),l=a?a(e):e,u=i.get("width"),s=0;n&&n.remove(),l=l||"&nbsp;",t=BUI.substitute(i.get("textTpl"),{text:l}),n=r(t).appendTo(o),s=n.outerWidth()-n.width(),n.width(u-s),i.set("textEl",n)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),a=n.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:o}}},{xclass:"form-field-plain"});i.exports=a}),define("bui/form/fields/list",["jquery","bui/common","bui/list","bui/data","bui/overlay"],function(e,t,i){function r(e){var t=e;return n.isPlainObject(e)&&(t=[],o.each(e,function(e,i){t.push({text:e,value:i})})),t}var n=e("jquery"),o=e("bui/common"),a=e("bui/list"),l=e("bui/form/fields/base"),a=l.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,t=e.get("children");return t[0]},bindUI:function(){var e=this,t=e._getList();t&&t.on("selectedchange",function(){var i=e._getListValue(t);e.set("value",i)})},_getListValue:function(e){var t=this;return e=e||t._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var t=this,i=t.getInnerControl(),r=t._getList();i.val(e),t._getListValue(r)!==e&&r.getCount()&&(r.get("multipleSelect")&&r.clearSelection(),r.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,t=e.get("defaultListCfg"),i=e.get("children"),r=e.get("list")||{};i[0]||(n.isPlainObject(r)&&o.mix(r,t),i.push(r))},setItems:function(e){var t=this,i=t.get("value"),n=t._getList();n.set("items",r(e)),n.setSelectionByField(i.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if(n.isPlainObject(e)){var t=[];o.each(e,function(e,i){t.push({value:i,text:e})}),e=t}return e}},list:{}},PARSER:{list:function(e){var t=e.find(".bui-simple-list");return t.length?{srcNode:t}:void 0}}},{xclass:"form-field-list"});i.exports=a}),define("bui/form/fields/textarea",["jquery","bui/common","bui/overlay"],function(e,t,i){var r=e("bui/form/fields/base"),n=r.extend({_uiSetRows:function(e){var t=this,i=t.getInnerControl();e&&i.attr("rows",e)},_uiSetCols:function(e){var t=this,i=t.getInnerControl();e&&i.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});i.exports=n}),define("bui/form/fields/uploader",["bui/common","jquery","bui/overlay"],function(e,t,i){var r=e("bui/common"),n=r.JSON,o=e("bui/form/fields/base"),a=e("bui/form/rules"),l=o.extend({renderUI:function(){var e=this,t=e.getInnerControl();e.get("srcNode")&&"file"===t.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var t=this,i=(t.get("children"),t.get("uploader")||{});e.async("bui/uploader",function(e){i.render=t.getControlContainer(),i.autoRender=!0,i=new e.Uploader(i),t.set("uploader",i),t.set("isCreate",!0),t.get("children").push(i),t._initQueue(i.get("queue")),i.on("success",function(e){var i=t._getUploaderResult();t.setControlValue(i)}),i.get("queue").on("itemremoved",function(){var e=t._getUploaderResult();t.setControlValue(e)})})},_getUploaderResult:function(){var e=this,t=e.get("uploader"),i=t.get("queue"),n=i.getItems(),o=[];return r.each(n,function(e){e.result&&o.push(e.result)}),o},setControlValue:function(e){var t=this,i=t.getInnerControl();i.val(n.stringify(e))},_initControlValue:function(){var e,t=this,i=t.getControlValue();i&&(e=r.JSON.parse(i),t.set("value",e))},_initQueue:function(e){var t=this,i=t.get("value"),n=[];r.each(i,function(e){var t=r.cloneObject(e);t.success=!0,t.result=e,n.push(t)}),e&&e.setItems(n)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var t=this.get("disabled");return e&&e.isController&&e.set("disabled",t),e}},disabled:{setter:function(e){var t=this,i=t.get("uploader");i&&i.isController&&i.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});a.add({name:"uploader",msg:r.i18n("uploadFileError"),validator:function(e,t,i,r){var n=r.get("uploader");return n&&!n.isValid()?i:void 0}}),i.exports=l}),define("bui/form/fields/checklist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(e,t,i){"use strict";var r=(e("bui/common"),e("bui/form/fields/list")),n=r.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});i.exports=n}),define("bui/form/fields/radiolist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(e,t,i){"use strict";var r=(e("bui/common"),e("bui/form/fields/list")),n=r.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});i.exports=n}),define("bui/form/groupvalid",["jquery","bui/common"],function(e,t,i){function r(){}function n(){}var o=e("jquery"),a="x-form-error",l=e("bui/form/valid");BUI.augment(r,l.View,{showError:function(e,t,i){
var r=BUI.substitute(t,{error:e}),n=o(r);n.appendTo(i),n.addClass(a)},clearErrors:function(){var e=this,t=e.getErrorsContainer();t.children("."+a).remove()}}),n.ATTRS=ATTRS=BUI.merge(!0,l.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(n,l,{__bindUI:function(){var e=this,t="validchange change";e.on(t,function(t){var i=t.target;if(i!=this&&e.get("showError")){var r=i.isValid();e._hasAllChildrenValid()&&(r=r&&e.isChildrenValid(),r&&(e.validControl(e.getRecord()),r=e.isSelfValid())),r?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,t=e.isChildrenValid();return t&&e.isSelfValid()},valid:function(){var e=this,t=e.get("children");e.get("disabled")||BUI.each(t,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,t=e.get("children"),i=!0;return BUI.each(t,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(i=!1,!1)}),i},isChildrenValid:function(){var e=this,t=e.get("children"),i=!0;return BUI.each(t,function(e){return e.get("disabled")||e.isValid()?void 0:(i=!1,!1)}),i},isSelfValid:function(){return!this.get("error")},validControl:function(e){var t=this,i=t.getValidError(e);t.set("error",i)},getErrors:function(){var e=this,t=e.get("children"),i=e.get("showChildError"),r=null,n=[];return i&&BUI.each(t,function(e){e.getErrors&&(n=n.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(r=e.get("error"),r&&n.push(r)),n},_uiSetErrorTpl:function(e){var t=this,i=t.get("children");BUI.each(i,function(t){t.get("userConfig").errorTpl||t.set("errorTpl",e)})}}),n.View=r,i.exports=n}),define("bui/form/form",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=e("jquery"),n=e("bui/common"),o=e("bui/form/fieldcontainer"),a=(n.Component,{NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"}),l=o.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"}),u=o.extend({renderUI:function(){var e,t=this,i=t.get("buttonBar");r.isPlainObject(i)&&t.get("buttons")&&(e=n.merge(t.getDefaultButtonBarCfg(),i),t._initButtonBar(e)),t._initSubmitMask()},_initButtonBar:function(t){var i=this;e.async("bui/toolbar",function(e){buttonBar=new e.Bar(t),i.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,t=e.get("el");t.on("submit",function(t){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===a.AJAX&&(t.preventDefault(),e.ajaxSubmit())):(t.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}},focusError:function(){var e=this,t=e.getFields();n.each(t,function(e){if(e.get("visible")&&!e.get("disabled")&&!e.isValid()){try{e.focus()}catch(t){n.log(t)}return!1}})},submit:function(e){var t=this,i=t.get("submitType");if(t.valid(),t.isValid()){if(0==t.onBeforeSubmit())return;i===a.NORMAL?t.get("el")[0].submit():i===a.AJAX&&t.ajaxSubmit(e)}else t.focusError()},ajaxSubmit:function(e){var t,i=this,o=i.get("method"),a=i.get("action"),l=i.get("callback"),u=i.get("submitMask"),s=i.serializeToObject(),c=n.merge(!0,{url:a,type:o,dataType:"json",data:s},e);e&&e.success&&(t=e.success),c.success=function(e){u&&u.hide&&u.hide(),t&&t(e),l&&l.call(i,e)},u&&u.show&&u.show(),r.ajax(c)},_initSubmitMask:function(){var t=this,i=t.get("submitType"),o=t.get("submitMask");i===a.AJAX&&o&&e.async("bui/mask",function(e){var i=r.isPlainObject(o)?o:{};o=new e.LoadMask(n.mix({el:t.get("el")},i)),t.set("submitMask",o)})},serializeToObject:function(){return n.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,t=e.get("initRecord");e.setRecord(t)},resetTips:function(){var e=this,t=e.getFields();n.each(t,function(e){e.resetTip()})},destructor:function(){var e=this,t=e.get("buttonBar"),i=e.get("submitMask");t&&t.destroy&&t.destroy(),i&&i.destroy&&i.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:n.i18n("loading")}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:l},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});u.View=l,i.exports=u}),define("bui/form/row",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=(e("bui/common"),e("bui/form/fieldcontainer")),n=r.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});i.exports=n}),define("bui/form/fieldgroup",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=e("bui/common"),n=e("bui/form/group/base");return r.mix(n,{Range:e("bui/form/group/range"),Check:e("bui/form/group/check"),Select:e("bui/form/group/select")}),n}),define("bui/form/group/base",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=(e("bui/common"),e("bui/form/fieldcontainer")),n=r.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});i.exports=n}),define("bui/form/group/range",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){function r(e,t,i){var r=e.get("allowEqual");return r?t>=i:t>i}var n=e("bui/form/group/base"),o=n.extend({},{ATTRS:{rangeText:{value:BUI.i18n("startNotMoreEnd")},allowEqual:{value:!0},validator:{value:function(e){for(var t=this,i=t.getFields(),n=!0,o=1;o<i.length;o++){var a,l,u=i[o],s=i[o-1];if(u&&s&&(a=u.get("value"),l=s.get("value"),!r(t,a,l))){n=!1;break}}return n?null:t.get("rangeText")}}}},{xclass:"form-group-range"});i.exports=o}),define("bui/form/group/check",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){function r(e){var t=e.getFieldAt(0);return t?t.get("name"):""}var n=e("bui/form/group/base"),o=n.extend({bindUI:function(){var e=this;e.on("change",function(t){var i=r(e),n=e.get("range"),o=e.getRecord(),a=o[i],l=n[1];a&&a.length>=l?e._setFieldsEnable(i,!1):e._setFieldsEnable(i,!0)})},_setFieldsEnable:function(e,t){var i=this,r=i.getFields(e);BUI.each(r,function(e){t?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});i.exports=o}),define("bui/form/group/select",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,i){function r(e){var t=[];return BUI.each(e,function(e){t.push({text:e.text,value:e.id})}),t}var n=e("bui/form/group/base"),o=e("bui/data"),a=BUI.Component.UIBase.Bindable,l=n.extend([a],{initializer:function(){var e=this,t=e.get("url"),i=e.get("store")||e._getStore();i.isStore||(i.autoLoad=!0,t&&(i.url=t),i=new o.TreeStore(i)),e.set("store",i)},bindUI:function(){var e=this;e.on("change",function(t){var i=t.target;if(i!=e){var r=i,n=r.get("value"),o=e._getFieldIndex(r)+1;e._valueChange(n,o)}})},onLoad:function(e){var t=this,i=e?e.node:t.get("store").get("root");t._setFieldItems(i.level,i.children)},_getStore:function(){var e=this,t=e.get("type");return t&&u[t]?u[t]:{}},_valueChange:function(e,t){var i=this,r=i.get("store");if(e){var n=r.findNode(e);if(!n)return;r.isLoaded(n)?i._setFieldItems(t,n.children):r.loadNode(n)}else i._setFieldItems(t,[])},_setFieldItems:function(e,t){var i=this,n=i.getFieldAt(e),o=r(t);n&&(n.setItems(o),i._valueChange(n.get("value"),e+1))},_getFieldIndex:function(e){var t=this,i=t.getFields();return BUI.Array.indexOf(e,i)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),u={};l.addType=function(e,t){u[e]=t},l.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),i.exports=l}),define("bui/form/hform",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,i){var r=(e("jquery"),e("bui/common"),e("bui/form/form")),n=r.extend({getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});i.exports=n});